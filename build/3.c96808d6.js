webpackJsonp([3],{759:function(a){var b;!function(b){a.exports=b()}(function(){return function c(f,e,g){function a(h,j){if(!e[h]){if(!f[h]){if(!j&&"function"==typeof b&&b)return b(h,!0);if(d)return d(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=e[h]={exports:{}};f[h][0].call(l.exports,function(b){var c=f[h][1][b];return a(c||b)},l,l.exports,c,f,e,g)}return e[h].exports}for(var d="function"==typeof b&&b,h=0;h<g.length;h++)a(g[h]);return a}({1:[function(b,c,d){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var e=b("./spec/reference-implementation/lib/readable-stream").ReadableStream,f=b("./spec/reference-implementation/lib/writable-stream").WritableStream,g=b("./spec/reference-implementation/lib/byte-length-queuing-strategy"),h=b("./spec/reference-implementation/lib/count-queuing-strategy"),j=b("./spec/reference-implementation/lib/transform-stream").TransformStream;d.ByteLengthQueuingStrategy=g,d.CountQueuingStrategy=h,d.TransformStream=j,d.ReadableStream=e,d.WritableStream=f;var k={ReadableStream:e,WritableStream:f,ByteLengthQueuingStrategy:g,CountQueuingStrategy:h,TransformStream:j};d.default=k,"undefined"!=typeof window&&Object.assign(window,k)},{"./spec/reference-implementation/lib/byte-length-queuing-strategy":3,"./spec/reference-implementation/lib/count-queuing-strategy":4,"./spec/reference-implementation/lib/readable-stream":7,"./spec/reference-implementation/lib/transform-stream":8,"./spec/reference-implementation/lib/writable-stream":9}],2:[function(){},{}],3:[function(a,b){"use strict";var c=function(){function b(b,c){for(var d,a=0;a<c.length;a++)d=c[a],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}(),d=a("./helpers.js").createDataProperty;b.exports=function(){function a(b){var c=b.highWaterMark;(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),d(this,"highWaterMark",c)}return c(a,[{key:"size",value:function(a){return a.byteLength}}]),a}()},{"./helpers.js":5}],4:[function(a,b){"use strict";var c=function(){function b(b,c){for(var d,a=0;a<c.length;a++)d=c[a],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}(),d=a("./helpers.js").createDataProperty;b.exports=function(){function a(b){var c=b.highWaterMark;(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),d(this,"highWaterMark",c)}return c(a,[{key:"size",value:function(){return 1}}]),a}()},{"./helpers.js":5}],5:[function(b,c,d){"use strict";function f(a,b,c){if("function"!=typeof a)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(a,b,c)}var g=Number.isNaN,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d.typeIsObject=function(a){return"object"===(void 0===a?"undefined":h(a))&&null!==a||"function"==typeof a},d.createDataProperty=function(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})},d.createArrayFromList=function(a){return a.slice()},d.ArrayBufferCopy=function(b,c,d,e,a){new Uint8Array(b).set(new Uint8Array(d,e,a),c)},d.CreateIterResultObject=function(a,b){var c={};return Object.defineProperty(c,"value",{value:a,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(c,"done",{value:b,enumerable:!0,writable:!0,configurable:!0}),c},d.IsFiniteNonNegativeNumber=function(a){return!(g(a)||a===1/0||0>a)},d.InvokeOrNoop=function(b,c,d){var e=b[c];if(void 0!==e)return f(e,b,d)},d.PromiseInvokeOrNoop=function(b,c,e){try{return Promise.resolve(d.InvokeOrNoop(b,c,e))}catch(a){return Promise.reject(a)}},d.PromiseInvokeOrPerformFallback=function(b,c,d,e,a){var g;try{g=b[c]}catch(a){return Promise.reject(a)}if(void 0===g)return e.apply(void 0,function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(a));try{return Promise.resolve(f(g,b,d))}catch(a){return Promise.reject(a)}},d.PromiseInvokeOrFallbackOrNoop=function(b,c,e,a,f){return d.PromiseInvokeOrPerformFallback(b,c,e,d.PromiseInvokeOrNoop,[b,a,f])},d.SameRealmTransfer=function(a){return a},d.ValidateAndNormalizeHighWaterMark=function(a){if(a=+a,g(a)||0>a)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return a},d.ValidateAndNormalizeQueuingStrategy=function(a,b){if(void 0!==a&&"function"!=typeof a)throw new TypeError("size property of a queuing strategy must be a function");return b=d.ValidateAndNormalizeHighWaterMark(b),{size:a,highWaterMark:b}}},{}],6:[function(b,c,d){"use strict";var f=b("./helpers.js").IsFiniteNonNegativeNumber;d.DequeueValue=function(a){var b=a.shift();return a._totalSize-=b.size,b.value},d.EnqueueValueWithSize=function(a,b,c){if(c=+c,!f(c))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");a.push({value:b,size:c}),void 0===a._totalSize&&(a._totalSize=0),a._totalSize+=c},d.GetTotalQueueSize=function(a){return void 0===a._totalSize&&(a._totalSize=0),a._totalSize},d.PeekQueueValue=function(a){return a[0].value}},{"./helpers.js":5}],7:[function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){return new Na(a)}function h(a){return!!w(a)&&!!Object.prototype.hasOwnProperty.call(a,"_readableStreamController")}function m(a){return void 0!==a._reader}function r(b,c){var e=f(b),g={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};g.promise=new Promise(function(a){g._resolve=a});var a=function(){function b(){var c=b._reader,d=b._branch1,f=b._branch2,a=b._teeState;return fa(c).then(function(b){var c=b.value,e=b.done;if(!0===e&&!1===a.closedOrErrored&&(!1===a.canceled1&&ia(d),!1===a.canceled2&&ia(f),a.closedOrErrored=!0),!0!==a.closedOrErrored){!1===a.canceled1&&ja(d,c),!1===a.canceled2&&ja(f,c)}})}return b}();a._reader=e,a._teeState=g,a._cloneForBranch2=c;var h=function(){function b(c){var d=b._stream,e=b._teeState;if(e.canceled1=!0,e.reason1=c,!0===e.canceled2){var a=p([e.reason1,e.reason2]),f=K(d,a);e._resolve(f)}return e.promise}return b}();h._stream=b,h._teeState=g;var j=function(){function b(c){var d=b._stream,e=b._teeState;if(e.canceled2=!0,e.reason2=c,!0===e.canceled1){var a=p([e.reason1,e.reason2]),f=K(d,a);e._resolve(f)}return e.promise}return b}();j._stream=b,j._teeState=g;var k=Object.create(Object.prototype);y(k,"pull",a),y(k,"cancel",h);var i=new _(k),l=Object.create(Object.prototype);y(l,"pull",a),y(l,"cancel",j);var m=new _(l);return a._branch1=i._readableStreamController,a._branch2=m._readableStreamController,e._closedPromise.catch(function(b){!0!==g.closedOrErrored&&(ka(a._branch1,b),ka(a._branch2,b),g.closedOrErrored=!0)}),[i,m]}function H(a){return new Promise(function(b,c){a._reader._readIntoRequests.push({_resolve:b,_reject:c})})}function J(a){return new Promise(function(b,c){a._reader._readRequests.push({_resolve:b,_reject:c})})}function K(a,b){return(a._disturbed=!0,"closed"===a._state)?Promise.resolve(void 0):"errored"===a._state?Promise.reject(a._storedError):(R(a),a._readableStreamController[N](b).then(function(){}))}function R(b){b._state="closed";var c=b._reader;if(void 0!==c){if(!0===aa(c)){var d,e=!0,f=!1;try{for(var a,g=c._readRequests[Symbol.iterator]();!(e=(a=g.next()).done);e=!0)(0,a.value._resolve)(o(void 0,!0))}catch(a){f=!0,d=a}finally{try{!e&&g.return&&g.return()}finally{if(f)throw d}}c._readRequests=[]}!function(a){a._closedPromise_resolve(void 0),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}(c)}}function S(b,e){b._state="errored",b._storedError=e;var g=b._reader;if(void 0!==g){if(!0===aa(g)){var h,j=!0,k=!1;try{for(var m,l=g._readRequests[Symbol.iterator]();!(j=(m=l.next()).done);j=!0)m.value._reject(e)}catch(a){k=!0,h=a}finally{try{!j&&l.return&&l.return()}finally{if(k)throw h}}g._readRequests=[]}else{var i,d=!0,n=!1;try{for(var o,c=g._readIntoRequests[Symbol.iterator]();!(d=(o=c.next()).done);d=!0)o.value._reject(e)}catch(a){n=!0,i=a}finally{try{!d&&c.return&&c.return()}finally{if(n)throw i}}g._readIntoRequests=[]}Ga(g,e),g._closedPromise.catch(function(){})}}function U(a,b,c){a._reader._readRequests.shift()._resolve(o(b,c))}function V(a){return a._reader._readIntoRequests.length}function X(a){return a._reader._readRequests.length}function Z(a){var b=a._reader;return void 0!==b&&!1!==t(b)}function $(a){var b=a._reader;return void 0!==b&&!1!==aa(b)}function t(a){return!!w(a)&&!!Object.prototype.hasOwnProperty.call(a,"_readIntoRequests")}function aa(a){return!!w(a)&&!!Object.prototype.hasOwnProperty.call(a,"_readRequests")}function ba(a,b){a._ownerReadableStream=b,b._reader=a,"readable"===b._state?function(a){a._closedPromise=new Promise(function(b,c){a._closedPromise_resolve=b,a._closedPromise_reject=c})}(a):"closed"===b._state?function(a){a._closedPromise=Promise.resolve(void 0),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}(a):(function(a,b){a._closedPromise=Promise.reject(b),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}(a,b._storedError),a._closedPromise.catch(function(){}))}function ca(a,b){return K(a._ownerReadableStream,b)}function da(a){"readable"===a._ownerReadableStream._state?Ga(a,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(a,b){a._closedPromise=Promise.reject(b)}(a,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),a._closedPromise.catch(function(){}),a._ownerReadableStream._reader=void 0,a._ownerReadableStream=void 0}function ea(a,b){var c=a._ownerReadableStream;return c._disturbed=!0,"errored"===c._state?Promise.reject(c._storedError):function(b,c){var e=b._controlledReadableStream,f=1;c.constructor!==DataView&&(f=c.constructor.BYTES_PER_ELEMENT);var g=c.constructor,h={buffer:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength,bytesFilled:0,elementSize:f,ctor:g,readerType:"byob"};if(0<b._pendingPullIntos.length)return h.buffer=Ma(h.buffer),b._pendingPullIntos.push(h),H(e);if("closed"===e._state){var i=new c.constructor(c.buffer,c.byteOffset,0);return Promise.resolve(o(i,!0))}if(0<b._totalQueuedBytes){if(!0===ua(b,h)){var j=sa(h);return wa(b),Promise.resolve(o(j,!1))}if(!0===b._closeRequested){var k=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ba(b,k),Promise.reject(k)}}h.buffer=Ma(h.buffer),b._pendingPullIntos.push(h);var l=H(e);return pa(b),l}(c._readableStreamController,b)}function fa(a){var b=a._ownerReadableStream;return b._disturbed=!0,"closed"===b._state?Promise.resolve(o(void 0,!0)):"errored"===b._state?Promise.reject(b._storedError):b._readableStreamController[W]()}function ga(a){return!!w(a)&&!!Object.prototype.hasOwnProperty.call(a,"_underlyingSource")}function ha(a){if(!1!==function(a){var b=a._controlledReadableStream;return"closed"===b._state||"errored"===b._state?!1:!0!==a._closeRequested&&!1!==a._started&&(!0===m(b)&&0<X(b)||0<ma(a))}(a)){if(!0===a._pulling)return void(a._pullAgain=!0);a._pulling=!0,l(a._underlyingSource,"pull",[a]).then(function(){if(a._pulling=!1,!0===a._pullAgain)return a._pullAgain=!1,ha(a)},function(b){la(a,b)}).catch(C)}}function ia(a){var b=a._controlledReadableStream;a._closeRequested=!0,0===a._queue.length&&R(b)}function ja(b,c){var d=b._controlledReadableStream;if(!0===m(d)&&0<X(d))U(d,c,!1);else{var e=1;if(void 0!==b._strategySize)try{e=b._strategySize(c)}catch(a){throw la(b,a),a}try{E(b._queue,c,e)}catch(a){throw la(b,a),a}}ha(b)}function ka(a,b){var c=a._controlledReadableStream;a._queue=[],S(c,b)}function la(a,b){"readable"===a._controlledReadableStream._state&&ka(a,b)}function ma(a){var b=k(a._queue);return a._strategyHWM-b}function na(a){return!!w(a)&&!!Object.prototype.hasOwnProperty.call(a,"_underlyingByteSource")}function oa(a){return!!w(a)&&!!Object.prototype.hasOwnProperty.call(a,"_associatedReadableByteStreamController")}function pa(a){if(!1!==function(a){var b=a._controlledReadableStream;return"readable"===b._state&&!0!==a._closeRequested&&!1!==a._started&&(!!($(b)&&0<X(b))||!!(Z(b)&&0<V(b))||0<Ca(a))}(a)){if(!0===a._pulling)return void(a._pullAgain=!0);a._pulling=!0,l(a._underlyingByteSource,"pull",[a]).then(function(){a._pulling=!1,!0===a._pullAgain&&(a._pullAgain=!1,pa(a))},function(b){"readable"===a._controlledReadableStream._state&&Ba(a,b)}).catch(C)}}function qa(a){xa(a),a._pendingPullIntos=[]}function ra(b,c){var d=!1;"closed"===b._state&&(d=!0);var e=sa(c);"default"===c.readerType?U(b,e,d):function(a,b,c){a._reader._readIntoRequests.shift()._resolve(o(b,c))}(b,e,d)}function sa(a){var b=a.bytesFilled,c=a.elementSize;return new a.ctor(a.buffer,a.byteOffset,b/c)}function ta(b,c,d,e){b._queue.push({buffer:c,byteOffset:d,byteLength:e}),b._totalQueuedBytes+=e}function ua(b,e){var g=Math.min,h=e.elementSize,j=e.bytesFilled-e.bytesFilled%h,a=g(b._totalQueuedBytes,e.byteLength-e.bytesFilled),k=e.bytesFilled+a,l=k-k%h,i=a,o=!1;l>j&&(i=l-e.bytesFilled,o=!0);for(var p=b._queue;0<i;){var d=p[0],c=g(i,d.byteLength),f=e.byteOffset+e.bytesFilled;n(e.buffer,f,d.buffer,d.byteOffset,c),d.byteLength===c?p.shift():(d.byteOffset+=c,d.byteLength-=c),b._totalQueuedBytes-=c,va(b,c,e),i-=c}return o}function va(a,b,c){xa(a),c.bytesFilled+=b}function wa(a){0===a._totalQueuedBytes&&!0===a._closeRequested?R(a._controlledReadableStream):pa(a)}function xa(a){void 0!==a._byobRequest&&(a._byobRequest._associatedReadableByteStreamController=void 0,a._byobRequest._view=void 0,a._byobRequest=void 0)}function ya(a){for(;0<a._pendingPullIntos.length;){if(0===a._totalQueuedBytes)return;var b=a._pendingPullIntos[0];!0===ua(a,b)&&(Aa(a),ra(a._controlledReadableStream,b))}}function za(a,b){var c=a._pendingPullIntos[0];if("closed"===a._controlledReadableStream._state){if(0!==b)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(a,b){b.buffer=Ma(b.buffer);for(var c=a._controlledReadableStream;0<V(c);)ra(c,Aa(a))}(a,c)}else!function(b,c,d){if(d.bytesFilled+c>d.byteLength)throw new RangeError("bytesWritten out of range");if(va(b,c,d),!(d.bytesFilled<d.elementSize)){Aa(b);var e=d.bytesFilled%d.elementSize;if(0<e){var a=d.byteOffset+d.bytesFilled,f=d.buffer.slice(a-e,a);ta(b,f,0,f.byteLength)}d.buffer=Ma(d.buffer),d.bytesFilled-=e,ra(b._controlledReadableStream,d),ya(b)}}(a,b,c)}function Aa(a){var b=a._pendingPullIntos.shift();return xa(a),b}function Ba(a,b){var c=a._controlledReadableStream;qa(a),a._queue=[],S(c,b)}function Ca(a){return a._strategyHWM-a._totalQueuedBytes}function Da(a){return new TypeError("ReadableStream.prototype."+a+" can only be used on a ReadableStream")}function Ea(a){return new TypeError("Cannot "+a+" a stream using a released reader")}function Fa(a){return new TypeError("ReadableStreamDefaultReader.prototype."+a+" can only be used on a ReadableStreamDefaultReader")}function Ga(a,b){a._closedPromise_reject(b),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}function Ha(a){return new TypeError("ReadableStreamBYOBReader.prototype."+a+" can only be used on a ReadableStreamBYOBReader")}function Ia(a){return new TypeError("ReadableStreamDefaultController.prototype."+a+" can only be used on a ReadableStreamDefaultController")}function Ja(a){return new TypeError("ReadableStreamBYOBRequest.prototype."+a+" can only be used on a ReadableStreamBYOBRequest")}function Ka(a){return new TypeError("ReadableByteStreamController.prototype."+a+" can only be used on a ReadableByteStreamController")}var La=function(){function b(b,c){for(var d,a=0;a<c.length;a++)d=c[a],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}(),e=a("./helpers.js"),n=e.ArrayBufferCopy,o=e.CreateIterResultObject,i=e.IsFiniteNonNegativeNumber,s=e.InvokeOrNoop,l=e.PromiseInvokeOrNoop,Ma=e.SameRealmTransfer,d=e.ValidateAndNormalizeQueuingStrategy,u=e.ValidateAndNormalizeHighWaterMark,v=a("./helpers.js"),p=v.createArrayFromList,y=v.createDataProperty,w=v.typeIsObject,C=a("./utils.js").rethrowAssertionErrorRejection,g=a("./queue-with-sizes.js"),P=g.DequeueValue,E=g.EnqueueValueWithSize,k=g.GetTotalQueueSize,B=a("./writable-stream.js"),I=B.AcquireWritableStreamDefaultWriter,D=B.IsWritableStream,T=B.IsWritableStreamLocked,q=B.WritableStreamAbort,j=B.WritableStreamDefaultWriterCloseWithErrorPropagation,O=B.WritableStreamDefaultWriterRelease,A=B.WritableStreamDefaultWriterWrite,N=Symbol("[[Cancel]]"),W=Symbol("[[Pull]]"),_=function(){function b(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=e.size,a=e.highWaterMark;c(this,b),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var g=d.type;if("bytes"===g+"")void 0===a&&(a=0),this._readableStreamController=new Y(this,d,a);else{if(void 0!==g)throw new RangeError("Invalid type is specified");void 0===a&&(a=1),this._readableStreamController=new G(this,d,f,a)}}return La(b,[{key:"cancel",value:function(a){return!1===h(this)?Promise.reject(Da("cancel")):!0===m(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):K(this,a)}},{key:"getReader",value:function(){var a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).mode;if(!1===h(this))throw Da("getReader");if("byob"===a){if(!1===na(this._readableStreamController))throw new TypeError("Cannot get a ReadableStreamBYOBReader for a stream not constructed with a byte source");return function(a){return new F(a)}(this)}if(void 0===a)return f(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(b,c){var d=b.writable,e=b.readable;return this.pipeTo(d,c),e}},{key:"pipeTo",value:function(g){var k=this,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.preventClose,d=b.preventAbort,p=b.preventCancel;if(!1===h(this))return Promise.reject(Da("pipeTo"));if(!1===D(g))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(c=!!c,d=!!d,p=!!p,!0===m(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===T(g))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var v=f(this),l=I(g),i=!1,s=Promise.resolve();return new Promise(function(a,n){function e(){return s=Promise.resolve(),!0==i?Promise.resolve():l._readyPromise.then(function(){return fa(v).then(function(a){var b=a.value;if(!0!==a.done)return s=A(l,b)})}).then(e)}function o(a,b,c){"errored"===a._state?c(a._storedError):b.catch(c).catch(C)}function b(){return s.catch(function(){})}function m(a,c,d){!0!=i&&(i=!0,b().then(function(){return a().then(function(){return h(c,d)},function(a){return h(!0,a)})}).catch(C))}function f(a,c){!0!=i&&(i=!0,b().then(function(){h(a,c)}).catch(C))}function h(b,c){O(l),da(v),b?n(c):a(void 0)}o(k,v._closedPromise,function(a){!1===d?m(function(){return q(g,a)},!0,a):f(!0,a)}),o(g,l._closedPromise,function(a){!1===p?m(function(){return K(k,a)},!0,a):f(!0,a)}),function(a,b,c){"closed"===a._state?c():b.then(c).catch(C)}(k,v._closedPromise,function(){!1===c?m(function(){return j(l)}):f()}),"closing"!==g._state&&"closed"!==g._state||function(){var a=new TypeError("the destination writable stream closed before all data could be piped to it");!1===p?m(function(){return K(k,a)},!0,a):f(!0,a)}(),e().catch(function(a){s=Promise.resolve(),C(a)})})}},{key:"tee",value:function(){if(!1===h(this))throw Da("tee");var a=r(this,!1);return p(a)}},{key:"locked",get:function(){if(!1===h(this))throw Da("locked");return m(this)}}]),b}();b.exports={ReadableStream:_,IsReadableStreamDisturbed:function(a){return a._disturbed},ReadableStreamDefaultControllerClose:ia,ReadableStreamDefaultControllerEnqueue:ja,ReadableStreamDefaultControllerError:ka,ReadableStreamDefaultControllerGetDesiredSize:ma};var Na=function(){function a(b){if(c(this,a),!1===h(b))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===m(b))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ba(this,b),this._readRequests=[]}return La(a,[{key:"cancel",value:function(a){return!1===aa(this)?Promise.reject(Fa("cancel")):void 0===this._ownerReadableStream?Promise.reject(Ea("cancel")):ca(this,a)}},{key:"read",value:function(){return!1===aa(this)?Promise.reject(Fa("read")):void 0===this._ownerReadableStream?Promise.reject(Ea("read from")):fa(this)}},{key:"releaseLock",value:function(){if(!1===aa(this))throw Fa("releaseLock");if(void 0!==this._ownerReadableStream){if(0<this._readRequests.length)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");da(this)}}},{key:"closed",get:function(){return!1===aa(this)?Promise.reject(Fa("closed")):this._closedPromise}}]),a}(),F=function(){function a(b){if(c(this,a),!h(b))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(m(b))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ba(this,b),this._readIntoRequests=[]}return La(a,[{key:"cancel",value:function(a){return t(this)?void 0===this._ownerReadableStream?Promise.reject(Ea("cancel")):ca(this,a):Promise.reject(Ha("cancel"))}},{key:"read",value:function(a){return t(this)?void 0===this._ownerReadableStream?Promise.reject(Ea("read from")):ArrayBuffer.isView(a)?0===a.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):ea(this,a):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(Ha("read"))}},{key:"releaseLock",value:function(){if(!t(this))throw Ha("releaseLock");if(void 0!==this._ownerReadableStream){if(0<this._readIntoRequests.length)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");da(this)}}},{key:"closed",get:function(){return t(this)?this._closedPromise:Promise.reject(Ha("closed"))}}]),a}(),G=function(){function b(e,f,g,a){if(c(this,b),!1===h(e))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==e._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=f,this._queue=[],this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var j=d(g,a);this._strategySize=j.size,this._strategyHWM=j.highWaterMark;var k=this,l=s(f,"start",[this]);Promise.resolve(l).then(function(){k._started=!0,ha(k)},function(a){la(k,a)}).catch(C)}return La(b,[{key:"close",value:function(){if(!1===ga(this))throw Ia("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var a=this._controlledReadableStream._state;if("readable"!==a)throw new TypeError("The stream (in "+a+" state) is not in the readable state and cannot be closed");ia(this)}},{key:"enqueue",value:function(a){if(!1===ga(this))throw Ia("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var b=this._controlledReadableStream._state;if("readable"!==b)throw new TypeError("The stream (in "+b+" state) is not in the readable state and cannot be enqueued to");return ja(this,a)}},{key:"error",value:function(a){if(!1===ga(this))throw Ia("error");var b=this._controlledReadableStream;if("readable"!==b._state)throw new TypeError("The stream is "+b._state+" and so cannot be errored");ka(this,a)}},{key:N,value:function(a){return this._queue=[],l(this._underlyingSource,"cancel",[a])}},{key:W,value:function(){var a=this._controlledReadableStream;if(0<this._queue.length){var b=P(this._queue);return!0===this._closeRequested&&0===this._queue.length?R(a):ha(this),Promise.resolve(o(b,!1))}var c=J(a);return ha(this),c}},{key:"desiredSize",get:function(){if(!1===ga(this))throw Ia("desiredSize");return ma(this)}}]),b}(),Q=function(){function a(b,d){c(this,a),this._associatedReadableByteStreamController=b,this._view=d}return La(a,[{key:"respond",value:function(a){if(!1===oa(this))throw Ja("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(a,b){if(b=+b,!1===i(b))throw new RangeError("bytesWritten must be a finite");za(a,b)}(this._associatedReadableByteStreamController,a)}},{key:"respondWithNewView",value:function(a){if(!1===oa(this))throw Ja("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");!function(a,b){var c=a._pendingPullIntos[0];if(c.byteOffset+c.bytesFilled!==b.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(c.byteLength!==b.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");c.buffer=b.buffer,za(a,b.byteLength)}(this._associatedReadableByteStreamController,a)}},{key:"view",get:function(){return this._view}}]),a}(),Y=function(){function b(d,e,f){if(c(this,b),!1===h(d))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==d._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=d,this._underlyingByteSource=e,this._pullAgain=!1,this._pulling=!1,qa(this),this._queue=[],this._totalQueuedBytes=0,this._closeRequested=!1,this._started=!1,this._strategyHWM=u(f);var a=e.autoAllocateChunkSize;if(void 0!==a&&(!1===Number.isInteger(a)||0>=a))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=a,this._pendingPullIntos=[];var g=this,i=s(e,"start",[this]);Promise.resolve(i).then(function(){g._started=!0,pa(g)},function(a){"readable"===d._state&&Ba(g,a)}).catch(C)}return La(b,[{key:"close",value:function(){if(!1===na(this))throw Ka("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var a=this._controlledReadableStream._state;if("readable"!==a)throw new TypeError("The stream (in "+a+" state) is not in the readable state and cannot be closed");!function(a){var b=a._controlledReadableStream;if(0<a._totalQueuedBytes)a._closeRequested=!0;else{if(0<a._pendingPullIntos.length&&0<a._pendingPullIntos[0].bytesFilled){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ba(a,c),c}R(b)}}(this)}},{key:"enqueue",value:function(a){if(!1===na(this))throw Ka("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var b=this._controlledReadableStream._state;if("readable"!==b)throw new TypeError("The stream (in "+b+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(a))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(b,c){var d=b._controlledReadableStream,e=c.buffer,a=c.byteOffset,f=c.byteLength,g=Ma(e);!0===$(d)?0===X(d)?ta(b,g,a,f):U(d,new Uint8Array(g,a,f),!1):!0===Z(d)?(ta(b,g,a,f),ya(b)):ta(b,g,a,f)}(this,a)}},{key:"error",value:function(a){if(!1===na(this))throw Ka("error");var b=this._controlledReadableStream;if("readable"!==b._state)throw new TypeError("The stream is "+b._state+" and so cannot be errored");Ba(this,a)}},{key:N,value:function(a){return 0<this._pendingPullIntos.length&&(this._pendingPullIntos[0].bytesFilled=0),this._queue=[],this._totalQueuedBytes=0,l(this._underlyingByteSource,"cancel",[a])}},{key:W,value:function(){var b=this._controlledReadableStream;if(0===X(b)){if(0<this._totalQueuedBytes){var c=this._queue.shift();this._totalQueuedBytes-=c.byteLength,wa(this);var d;try{d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}catch(a){return Promise.reject(a)}return Promise.resolve(o(d,!1))}var e=this._autoAllocateChunkSize;if(void 0!==e){var f;try{f=new ArrayBuffer(e)}catch(a){return Promise.reject(a)}var g={buffer:f,byteOffset:0,byteLength:e,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(g)}}var h=J(b);return pa(this),h}},{key:"byobRequest",get:function(){if(!1===na(this))throw Ka("byobRequest");if(void 0===this._byobRequest&&0<this._pendingPullIntos.length){var a=this._pendingPullIntos[0],b=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled);this._byobRequest=new Q(this,b)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===na(this))throw Ka("desiredSize");return Ca(this)}}]),b}()},{"./helpers.js":5,"./queue-with-sizes.js":6,"./utils.js":2,"./writable-stream.js":9}],8:[function(a,e){"use strict";function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,c){if(!0===a._errored)throw new TypeError("TransformStream is already errored");if(!0===a._readableClosed)throw new TypeError("Readable side is already closed");var e=a._readableController;try{d(e,c)}catch(b){throw a._readableClosed=!0,q(a,b),a._storedError}!0==0>=b(e)&&!1===a._backpressure&&x(a,!0)}function k(a){try{c(a._readableController)}catch(a){}a._readableClosed=!0}function q(a,b){!1===a._errored&&t(a,b)}function t(a,b){a._errored=!0,a._storedError=b,!1===a._writableDone&&u(a._writableController,b),!1===a._readableClosed&&f(a._readableController,b)}function w(a){return!1===a._backpressure?Promise.resolve():a._backpressureChangePromise}function x(a,b){void 0!==a._backpressureChangePromise&&a._backpressureChangePromise_resolve(b),a._backpressureChangePromise=new Promise(function(b){a._backpressureChangePromise_resolve=b}),a._backpressureChangePromise.then(function(){}),a._backpressure=b}function z(a,b){return j(b._controlledTransformStream,a),Promise.resolve()}function r(a){return!!n(a)&&!!Object.prototype.hasOwnProperty.call(a,"_controlledTransformStream")}function A(a){return!!n(a)&&!!Object.prototype.hasOwnProperty.call(a,"_transformStreamController")}function B(a){return new TypeError("TransformStreamDefaultController.prototype."+a+" can only be used on a TransformStreamDefaultController")}function D(a){return new TypeError("TransformStream.prototype."+a+" can only be used on a TransformStream")}var E=function(){function b(b,c){for(var d,a=0;a<c.length;a++)d=c[a],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}(),o=a("./helpers.js"),F=o.InvokeOrNoop,l=o.PromiseInvokeOrPerformFallback,i=o.PromiseInvokeOrNoop,n=o.typeIsObject,s=a("./readable-stream.js"),G=s.ReadableStream,c=s.ReadableStreamDefaultControllerClose,d=s.ReadableStreamDefaultControllerEnqueue,f=s.ReadableStreamDefaultControllerError,b=s.ReadableStreamDefaultControllerGetDesiredSize,h=a("./writable-stream.js"),m=h.WritableStream,u=h.WritableStreamDefaultControllerError,H=function(){function a(b,c){g(this,a),this._transformStream=b,this._startPromise=c}return E(a,[{key:"start",value:function(a){var b=this._transformStream;return b._writableController=a,this._startPromise.then(function(){return w(b)})}},{key:"write",value:function(a){return function(b,c){b._transforming=!0;var d=b._transformer,e=b._transformStreamController;return l(d,"transform",[c,e],z,[c,e]).then(function(){return b._transforming=!1,w(b)},function(a){return q(b,a),Promise.reject(a)})}(this._transformStream,a)}},{key:"abort",value:function(){var a=this._transformStream;a._writableDone=!0,t(a,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var a=this._transformStream;return a._writableDone=!0,i(a._transformer,"flush",[a._transformStreamController]).then(function(){return!0===a._errored?Promise.reject(a._storedError):(!1===a._readableClosed&&k(a),Promise.resolve())}).catch(function(b){return q(a,b),Promise.reject(a._storedError)})}}]),a}(),y=function(){function a(b,c){g(this,a),this._transformStream=b,this._startPromise=c}return E(a,[{key:"start",value:function(a){var b=this._transformStream;return b._readableController=a,this._startPromise.then(function(){return!0===b._backpressure?Promise.resolve():b._backpressureChangePromise})}},{key:"pull",value:function(){var a=this._transformStream;return x(a,!1),a._backpressureChangePromise}},{key:"cancel",value:function(){var a=this._transformStream;a._readableClosed=!0,t(a,new TypeError("Readable side canceled"))}}]),a}(),v=function(){function a(b){if(g(this,a),!1===A(b))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==b._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=b}return E(a,[{key:"enqueue",value:function(a){if(!1===r(this))throw B("enqueue");j(this._controlledTransformStream,a)}},{key:"close",value:function(){if(!1===r(this))throw B("close");!function(a){if(!0===a._errored)throw new TypeError("TransformStream is already errored");if(!0===a._readableClosed)throw new TypeError("Readable side is already closed");k(a)}(this._controlledTransformStream)}},{key:"error",value:function(a){if(!1===r(this))throw B("error");!function(a,b){if(!0===a._errored)throw new TypeError("TransformStream is already errored");t(a,b)}(this._controlledTransformStream,a)}},{key:"desiredSize",get:function(){if(!1===r(this))throw B("desiredSize");var a=this._controlledTransformStream._readableController;return b(a)}}]),a}(),p=function(){function c(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,c),this._transformer=f;var e=f.readableStrategy,h=f.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new v(this);var a,j=new Promise(function(b){a=b}),k=new y(this,j);this._readable=new G(k,e);var i=new H(this,j);this._writable=new m(i,h),x(this,0>=b(this._readableController));var l=this,n=F(f,"start",[l._transformStreamController]);a(n),j.catch(function(a){!1===l._errored&&(l._errored=!0,l._storedError=a)})}return E(c,[{key:"readable",get:function(){if(!1===A(this))throw D("readable");return this._readable}},{key:"writable",get:function(){if(!1===A(this))throw D("writable");return this._writable}}]),c}();e.exports={TransformStream:p}},{"./helpers.js":5,"./readable-stream.js":7,"./writable-stream.js":9}],9:[function(a,e){"use strict";function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a){return new s(a)}function k(a){return!!n(a)&&!!Object.prototype.hasOwnProperty.call(a,"_writableStreamController")}function p(a){return void 0!==a._writer}function q(b,c){var d=b._state;if("closed"===d)return Promise.resolve(void 0);if("errored"===d)return Promise.reject(b._storedError);var e=new TypeError("Aborted");v(b,e);var a=b._writableStreamController;if(!0===a._writing||!0===a._inClose){var f=new Promise(function(a,c){b._pendingAbortRequest={_resolve:a,_reject:c}});return!0===a._writing?f.then(function(){return B(b._writableStreamController,c)}):f}return B(b._writableStreamController,c)}function v(b,c){var d=b._state;b._state="errored",b._storedError=c;var e=b._writableStreamController;(void 0===e||!1===e._writing&&!1===e._inClose)&&w(b);var a=b._writer;void 0!==a&&("writable"===d&&!0===F(b._writableStreamController)?L(a,c):M(a,c),a._readyPromise.catch(function(){}))}function w(b){var c,d=b._storedError,e=!0,f=!1;try{for(var a,g=b._writeRequests[Symbol.iterator]();!(e=(a=g.next()).done);e=!0)a.value._reject(d)}catch(a){f=!0,c=a}finally{try{!e&&g.return&&g.return()}finally{if(f)throw c}}b._writeRequests=[],void 0!==b._pendingCloseRequest&&(b._pendingCloseRequest._reject(d),b._pendingCloseRequest=void 0);var h=b._writer;void 0!==h&&(K(h,d),h._closedPromise.catch(function(){}))}function x(a,b){var c=a._writer;void 0!==c&&(!0===b?function(a){a._readyPromise=new Promise(function(b,c){a._readyPromise_resolve=b,a._readyPromise_reject=c})}(c):N(c))}function t(a){return!!n(a)&&!!Object.prototype.hasOwnProperty.call(a,"_ownerWritableStream")}function z(b){var c=b._ownerWritableStream,d=c._state;if("closed"===d||"errored"===d)return Promise.reject(new TypeError("The stream (in "+d+" state) is not in the writable state and cannot be closed"));var e=new Promise(function(a,b){c._pendingCloseRequest={_resolve:a,_reject:b}});return!0===F(c._writableStreamController)&&N(b),c._state="closing",function(a){f(a._queue,"close",0),D(a)}(c._writableStreamController),e}function r(b){var c=b._ownerWritableStream,d=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness"),e=c._state;"writable"===e||"closing"===e||void 0!==c._pendingAbortRequest?K(b,d):function(a,b){a._closedPromise=Promise.reject(b)}(b,d),b._closedPromise.catch(function(){}),"writable"===e&&!0===F(c._writableStreamController)?L(b,d):M(b,d),b._readyPromise.catch(function(){}),c._writer=void 0,b._ownerWritableStream=void 0}function A(b,c){var d=b._ownerWritableStream,e=d._state;if("closed"===e||"errored"===e)return Promise.reject(new TypeError("The stream (in "+e+" state) is not in the writable state and cannot be written to"));var a=function(a){return new Promise(function(b,c){a._writeRequests.push({_resolve:b,_reject:c})})}(d);return function(b,c){var d=b._controlledWritableStream,e=1;if(void 0!==b._strategySize)try{e=b._strategySize(c)}catch(a){return void E(b,a)}var a=F(b);try{f(b._queue,{chunk:c},e)}catch(a){return void E(b,a)}if("writable"===d._state){var g=F(b);a!==g&&x(d,g)}D(b)}(d._writableStreamController,c),a}function B(a,b){return a._queue=[],i(a._underlyingSink,"abort",[b],"close",[a]).then(function(){})}function C(a){var c=b(a._queue);return a._strategyHWM-c}function D(a){if("closed"!==a._controlledWritableStream._state&&"errored"!==a._controlledWritableStream._state&&!1!==a._started&&!0!==a._writing&&0!==a._queue.length){var b=h(a._queue);"close"===b?function(a){var b=a._controlledWritableStream;d(a._queue),a._inClose=!0,l(a._underlyingSink,"close",[a]).then(function(){a._inClose=!1,"closing"!==b._state&&"errored"!==b._state||(b._pendingCloseRequest._resolve(void 0),b._pendingCloseRequest=void 0,function(a){"closing"===a._state?(function(a){a._closedPromise_resolve(void 0),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}(a._writer),a._state="closed"):(K(a._writer,a._storedError),a._writer._closedPromise.catch(function(){})),void 0!==a._pendingAbortRequest&&(a._pendingAbortRequest._resolve(),a._pendingAbortRequest=void 0)}(b))},function(c){a._inClose=!1,b._pendingCloseRequest._reject(c),b._pendingCloseRequest=void 0,void 0!==b._pendingAbortRequest&&(b._pendingAbortRequest._reject(c),b._pendingAbortRequest=void 0),E(a,c)}).catch(u)}(a):function(b,a){b._writing=!0;var c=b._controlledWritableStream;c._pendingWriteRequest=c._writeRequests.shift(),l(b._underlyingSink,"write",[a,b]).then(function(){var e=c._state;if(b._writing=!1,c._pendingWriteRequest._resolve(void 0),c._pendingWriteRequest=void 0,"errored"===e)return w(c),void(void 0!==c._pendingAbortRequest&&(c._pendingAbortRequest._resolve(),c._pendingAbortRequest=void 0));var f=F(b);if(d(b._queue),"closing"!==e){var a=F(b);f!==a&&x(b._controlledWritableStream,a)}D(b)},function(a){b._writing=!1,c._pendingWriteRequest._reject(a),c._pendingWriteRequest=void 0,"errored"===c._state&&(c._storedError=a,w(c)),void 0!==c._pendingAbortRequest&&(c._pendingAbortRequest._reject(a),c._pendingAbortRequest=void 0),E(b,a)}).catch(u)}(a,b.chunk)}}function E(a,b){"writable"!==a._controlledWritableStream._state&&"closing"!==a._controlledWritableStream._state||G(a,b)}function F(a){return 0>=C(a)}function G(a,b){v(a._controlledWritableStream,b),a._queue=[]}function H(a){return new TypeError("WritableStream.prototype."+a+" can only be used on a WritableStream")}function I(a){return new TypeError("WritableStreamDefaultWriter.prototype."+a+" can only be used on a WritableStreamDefaultWriter")}function J(a){return new TypeError("Cannot "+a+" a stream using a released writer")}function K(a,b){a._closedPromise_reject(b),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}function L(a,b){a._readyPromise_reject(b),a._readyPromise_resolve=void 0,a._readyPromise_reject=void 0}function M(a,b){a._readyPromise=Promise.reject(b)}function N(a){a._readyPromise_resolve(void 0),a._readyPromise_resolve=void 0,a._readyPromise_reject=void 0}var O=function(){function b(b,c){for(var d,a=0;a<c.length;a++)d=c[a],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}(),o=a("./helpers.js"),P=o.InvokeOrNoop,l=o.PromiseInvokeOrNoop,i=o.PromiseInvokeOrFallbackOrNoop,Q=o.ValidateAndNormalizeQueuingStrategy,n=o.typeIsObject,u=a("./utils.js").rethrowAssertionErrorRejection,c=a("./queue-with-sizes.js"),d=c.DequeueValue,f=c.EnqueueValueWithSize,b=c.GetTotalQueueSize,h=c.PeekQueueValue,m=function(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=d.size,a=d.highWaterMark,f=void 0===a?1:a;if(g(this,b),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._pendingWriteRequest=void 0,this._pendingCloseRequest=void 0,this._pendingAbortRequest=void 0,void 0!==c.type)throw new RangeError("Invalid type is specified");this._writableStreamController=new R(this,c,e,f)}return O(b,[{key:"abort",value:function(a){return!1===k(this)?Promise.reject(H("abort")):!0===p(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):q(this,a)}},{key:"getWriter",value:function(){if(!1===k(this))throw H("getWriter");return j(this)}},{key:"locked",get:function(){if(!1===k(this))throw H("locked");return p(this)}}]),b}();e.exports={AcquireWritableStreamDefaultWriter:j,IsWritableStream:k,IsWritableStreamLocked:p,WritableStream:m,WritableStreamAbort:q,WritableStreamDefaultControllerError:G,WritableStreamDefaultWriterCloseWithErrorPropagation:function(a){var b=a._ownerWritableStream,c=b._state;return"closing"===c||"closed"===c?Promise.resolve():"errored"===c?Promise.reject(b._storedError):z(a)},WritableStreamDefaultWriterRelease:r,WritableStreamDefaultWriterWrite:A};var s=function(){function a(b){if(g(this,a),!1===k(b))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===p(b))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=b,b._writer=this;var c=b._state;"writable"===c||"closing"===c?function(a){a._closedPromise=new Promise(function(b,c){a._closedPromise_resolve=b,a._closedPromise_reject=c})}(this):"closed"===c?function(a){a._closedPromise=Promise.resolve(void 0),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}(this):(function(a,b){a._closedPromise=Promise.reject(b),a._closedPromise_resolve=void 0,a._closedPromise_reject=void 0}(this,b._storedError),this._closedPromise.catch(function(){})),"writable"===c&&!0===F(b._writableStreamController)?function(a){a._readyPromise=new Promise(function(b,c){a._readyPromise_resolve=b,a._readyPromise_reject=c})}(this):function(a){a._readyPromise=Promise.resolve(void 0),a._readyPromise_resolve=void 0,a._readyPromise_reject=void 0}(this)}return O(a,[{key:"abort",value:function(a){return!1===t(this)?Promise.reject(I("abort")):void 0===this._ownerWritableStream?Promise.reject(J("abort")):function(a,b){return q(a._ownerWritableStream,b)}(this,a)}},{key:"close",value:function(){if(!1===t(this))return Promise.reject(I("close"));var a=this._ownerWritableStream;return void 0===a?Promise.reject(J("close")):"closing"===a._state?Promise.reject(new TypeError("cannot close an already-closing stream")):z(this)}},{key:"releaseLock",value:function(){if(!1===t(this))throw I("releaseLock");void 0!==this._ownerWritableStream&&r(this)}},{key:"write",value:function(a){if(!1===t(this))return Promise.reject(I("write"));var b=this._ownerWritableStream;return void 0===b?Promise.reject(J("write to")):"closing"===b._state?Promise.reject(new TypeError("Cannot write to an already-closed stream")):A(this,a)}},{key:"closed",get:function(){return!1===t(this)?Promise.reject(I("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===t(this))throw I("desiredSize");if(void 0===this._ownerWritableStream)throw J("desiredSize");return function(a){var b=a._ownerWritableStream,c=b._state;return"errored"===c?null:"closed"===c?0:C(b._writableStreamController)}(this)}},{key:"ready",get:function(){return!1===t(this)?Promise.reject(I("ready")):this._readyPromise}}]),a}(),R=function(){function b(c,e,f,a){if(g(this,b),!1===k(c))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==c._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=c,this._underlyingSink=e,this._queue=[],this._started=!1,this._writing=!1,this._inClose=!1;var h=Q(f,a);this._strategySize=h.size,this._strategyHWM=h.highWaterMark;var j=F(this);!0===j&&x(c,j);var i=this,l=P(e,"start",[this]);Promise.resolve(l).then(function(){i._started=!0,D(i)},function(a){E(i,a)}).catch(u)}return O(b,[{key:"error",value:function(a){if(!1===function(a){return!!n(a)&&!!Object.prototype.hasOwnProperty.call(a,"_underlyingSink")}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var b=this._controlledWritableStream._state;if("closed"===b||"errored"===b)throw new TypeError("The stream is "+b+" and so cannot be errored");G(this,a)}}]),b}()},{"./helpers.js":5,"./queue-with-sizes.js":6,"./utils.js":2}]},{},[1])(1)})}});